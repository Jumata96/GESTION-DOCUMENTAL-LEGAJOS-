<?php
bolt_decrypt( __FILE__ , 'Tk6uEQ'); return 0;
##!!!##DQoNCm5hbWVzcGFjZSBBcHBcSHR0cFxDb250cm9sbGVyczsNCi8vIG5hbWVzcGFjZSBBcHBcSW1wb3J0czsNCg0KDQp1c2UgQXV0aDsNCnVzZSBEQjsNCnVzZSBJbGx1bWluYXRlXFN1cHBvcnRcRmFjYWRlc1xIYXNoOw0KdXNlIElsbHVtaW5hdGVcSHR0cFxSZXF1ZXN0Ow0KdXNlIElsbHVtaW5hdGVcU3VwcG9ydFxDb2xsZWN0aW9uIGFzIENvbGxlY3Rpb247DQp1c2UgVmFsaWRhdG9yOw0KdXNlIEV4Y2VsOw0KdXNlIENhcmJvblxDYXJib247ICANCnVzZSBBcHBcSW1wb3J0c1xUaWNrZXRJbXBvcnQ7DQp1c2UgQXBwXFRpY2tldDsNCg0KDQpjbGFzcyBDbGllbnRlc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyDQp7ICAgICAgDQogICAgDQogICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1IRVJSQU1JRU5UQVMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgIHB1YmxpYyBmdW5jdGlvbiBoZXJyYW1pZW50YUNsaWVudGVzKCkNCiAgIHsNCiAgICAgICAkdmFsaWRhID0gMDsNCg0KICAgICAgIC8vLS0gVmFsaWRhY2nDs24gcGFyYSBtb3N0cmFyIG1lbnNhamVzIGFsIHJlYWxpemFyIHVuIENSVUQNCiAgICAgICAkdmFsaWRhY2lvbiA9IERCOjp0YWJsZSgndmFsaWRhY2lvbicpDQogICAgICAgICAgICAgICAgICAgICAgIC0+c2VsZWN0KCd2YWxvcicpDQogICAgICAgICAgICAgICAgICAgICAgIC0+d2hlcmUoJ2lkdXN1YXJpbycsQXV0aDo6dXNlcigpLT5pZCktPmdldCgpOw0KDQogICAgICAgZm9yZWFjaCAoJHZhbGlkYWNpb24gYXMgJHZhbCkgew0KICAgICAgICAgICAkdmFsaWRhID0gJHZhbC0+dmFsb3I7DQogICAgICAgfQ0KICAgICAgIGlmICgkdmFsaWRhID4gMCkgew0KICAgICAgICAgICBEQjo6dGFibGUoJ3ZhbGlkYWNpb24nKQ0KICAgICAgICAgICAtPndoZXJlKCdpZHVzdWFyaW8nLHN0cnZhbChBdXRoOjp1c2VyKCktPmlkKSkNCiAgICAgICAgICAgLT51cGRhdGUoWyd2YWxvcicgPT4gMF0pOw0KICAgICAgIH0NCg0KICAgICAgIHJldHVybiB2aWV3KCdmb3Jtcy5oZXJyYW1pZW50YXMuaW1wb3J0RXhwb3J0JyxbDQogICAgICAgICAgICd2YWxpZGEnICAgID0+ICR2YWxpZGENCiAgICAgICBdKTsNCiAgIH0NCiAgIHB1YmxpYyBmdW5jdGlvbiBpbXBvcnRhckNsaWVudGVzKFJlcXVlc3QgJHJlcXVlc3QpDQogICB7ICAgLy9kZCgkcmVxdWVzdCk7DQogICAgICAgJGtleSA9IG5ldyBNYWVzdHJvQ29udHJvbGxlcigpOw0KICAgICAgICRjb2RpZ28gPSBudWxsOw0KICAgICAgICRlc3RhZG8gPSAwOw0KICAgICAgICRpZGRvY3VtZW50byA9IG51bGw7DQogICAgICAgJGlkZm9ybWFfcGFnbyA9IG51bGw7DQogICAgICAgJGlkZG9jX3ZlbnRhID0gbnVsbDsNCiAgICAgICAkaWRtb25lZGEgPSBudWxsOw0KICAgICAgICRjbGllbnRlID0gbnVsbDsNCiAgICAgICAkY291bnQ9MDsNCiAgICAgICAgJGZpbGUgPSAkcmVxdWVzdC0+ZmlsZSgnY2xpZW50ZXNYTFMnKTsNCiAgICAgICAgLy8gICAkYXJyYXkgPUV4Y2VsOjppbXBvcnQobmV3IFRpY2tldEltcG9ydCwgJGZpbGUpOyANCiAgICAgICAgICAkYXJyYXkgPSBFeGNlbDo6dG9BcnJheShuZXcgVGlja2V0SW1wb3J0LCAkZmlsZSk7ICANCiAgICAgICAgICAgIGZvcmVhY2ggKCRhcnJheVswXSBhcyAkZGF0b3MpIHsgDQoNCiAgICAgICAgICAgICAgICAkY291bnQrPTE7DQogICAgICAgICAgICAgICAgLy8gICAvIGRkKCAkZGF0b3MpOw0KICAgICAgICAgICAgICBpZigkY291bnQgPiAzKXsNCiAgICAgICAgICAgICAgICAvLyBkZCggJGRhdG9zKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gZGQoJ2xlbGdvJywkZGF0b3MpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICROb21icmVSZWdpbWVuPSAkZGF0b3NbMjZdOyANCiAgICAgICAgICAgICAgIGlmKGVtcHR5KCROb21icmVSZWdpbWVuKSApDQogICAgICAgICAgICAgICB7IA0KICAgICAgICAgICAgICAgICROb21icmVSZWdpbWVuPSJJTVBPUlRBRE8gU0lOIERBVE9TIjsNCiAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAkcmVnaW1lbj0gREI6OnRhYmxlKCdyZWdpbWVuX2xhYm9yYWwnKS0+d2hlcmUoJ25vbWJyZScsICROb21icmVSZWdpbWVuKS0+Z2V0KCk7IA0KICAgICAgICAgICAgICAgJGRhdGVSZWdpc3Rybz1kYXRlKCdZLW0tZCBIOm06cycpOyANCiAgICAgICAgICAgICAgIGlmKGNvdW50KCRyZWdpbWVuKT09MCl7ICANCiAgICAgICAgICAgICAgICAgICAgICAgICRyZWdpbWVuPW51bGw7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgREI6OnRhYmxlKCdyZWdpbWVuX2xhYm9yYWwnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+aW5zZXJ0KFsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdub21icmUnICAgICAgICAgICAgICAgID0+JE5vbWJyZVJlZ2ltZW4sIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVzY3JpcGNpb24nICAgICAgICAgICA9PiJJTVBPUlRBRE8gREVTREUgRUwgUEFEUk9OIEdFTkVSQUwiLCAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmVjaGFfY3JlYWNpb24nICAgICAgICA9PiAkZGF0ZVJlZ2lzdHJvLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXN0YWRvJyAgICAgICAgICAgICAgICA9PiAnMScgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7ICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVnaW1lbj0gREI6OnRhYmxlKCdyZWdpbWVuX2xhYm9yYWwnKS0+d2hlcmUoJ2ZlY2hhX2NyZWFjaW9uJywgJGRhdGVSZWdpc3RybyktPmdldCgpOyANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAvL2RhdG9zIGRlbCBsYSBzaXR1YWNpb24gbGFib3JhbCANCiAgICAgICAgICAgICAgICROb21icmVTaXR1YWNpb25fbGFib3JhbD0gJGRhdG9zWzI3XTsgDQogICAgICAgICAgICAgICBpZihlbXB0eSgkTm9tYnJlU2l0dWFjaW9uX2xhYm9yYWwpICkNCiAgICAgICAgICAgICAgIHsgIA0KICAgICAgICAgICAgICAgICROb21icmVTaXR1YWNpb25fbGFib3JhbD0iSU1QT1JUQURPIFNJTiBEQVRPUyI7DQogICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgJHNpdHVhY2lvbl9sYWJvcmFsPSBEQjo6dGFibGUoJ3NpdHVhY2lvbl9sYWJvcmFsJyktPndoZXJlKCdub21icmUnLCAkTm9tYnJlU2l0dWFjaW9uX2xhYm9yYWwpLT5nZXQoKTsgDQogICAgICAgICAgICAgICAgICAgIGlmKGNvdW50KCRzaXR1YWNpb25fbGFib3JhbCk9PTApeyAgDQogICAgICAgICAgICAgICAgICAgICAgICAkc2l0dWFjaW9uX2xhYm9yYWw9bnVsbDsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgREI6OnRhYmxlKCdzaXR1YWNpb25fbGFib3JhbCcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT5pbnNlcnQoWyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25vbWJyZScgICAgICAgICAgICAgICAgPT4kTm9tYnJlU2l0dWFjaW9uX2xhYm9yYWwsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVzY3JpcGNpb24nICAgICAgICAgICA9PiJJTVBPUlRBRE8gREVTREUgRUwgUEFEUk9OIEdFTkVSQUwiLCAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmVjaGFfY3JlYWNpb24nICAgICAgICA9PiAkZGF0ZVJlZ2lzdHJvLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXN0YWRvJyAgICAgICAgICAgICAgICA9PiAnMScgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7ICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2l0dWFjaW9uX2xhYm9yYWw9IERCOjp0YWJsZSgnc2l0dWFjaW9uX2xhYm9yYWwnKS0+d2hlcmUoJ2ZlY2hhX2NyZWFjaW9uJywgJGRhdGVSZWdpc3RybyktPmdldCgpOyANCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIC8vZGF0b3MgZGVsIGFyZWEgIGxhYm9yYWwgDQogICAgICAgICAgICAgICAgJE5vbWJyZUFyZWFfbGFib3JhbD0gJGRhdG9zWzM5XTsgDQogICAgICAgICAgICAgICBpZihlbXB0eSgkTm9tYnJlQXJlYV9sYWJvcmFsKSApDQogICAgICAgICAgICAgICB7IA0KICAgICAgICAgICAgICAgICROb21icmVBcmVhX2xhYm9yYWw9IklNUE9SVEFETyBTSU4gREFUT1MiOw0KICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICRhcmVhX2xhYm9yYWw9IERCOjp0YWJsZSgnYXJlYV9sYWJvcmFsJyktPndoZXJlKCdub21icmUnLCAkTm9tYnJlQXJlYV9sYWJvcmFsKS0+Z2V0KCk7IA0KICAgICAgICAgICAgICAgICAgICBpZihjb3VudCgkYXJlYV9sYWJvcmFsKT09MCl7ICANCiAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhX2xhYm9yYWw9bnVsbDsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgREI6OnRhYmxlKCdhcmVhX2xhYm9yYWwnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+aW5zZXJ0KFsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdub21icmUnICAgICAgICAgICAgICAgID0+JE5vbWJyZUFyZWFfbGFib3JhbCwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZXNjcmlwY2lvbicgICAgICAgICAgID0+IklNUE9SVEFETyBERVNERSBFTCBQQURST04gR0VORVJBTCIsICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmZWNoYV9jcmVhY2lvbicgICAgICAgID0+ICRkYXRlUmVnaXN0cm8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlc3RhZG8nICAgICAgICAgICAgICAgID0+ICcxJyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhX2xhYm9yYWw9IERCOjp0YWJsZSgnYXJlYV9sYWJvcmFsJyktPndoZXJlKCdmZWNoYV9jcmVhY2lvbicsICRkYXRlUmVnaXN0cm8pLT5nZXQoKTsgDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAvL2RhdG9zIGRlbCBjYXJnbyBsYWJvcmFsDQogICAgICAgICAgICAgICAgJE5vbWJyZUNhcmdvX2xhYm9yYWw9ICRkYXRvc1syNV07IA0KICAgICAgICAgICAgICAgaWYoZW1wdHkoJE5vbWJyZUNhcmdvX2xhYm9yYWwpICkNCiAgICAgICAgICAgICAgIHsgDQogICAgICAgICAgICAgICAgJE5vbWJyZUNhcmdvX2xhYm9yYWw9IklNUE9SVEFETyBTSU4gREFUT1MiOw0KICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgJGNhcmdvX2xhYm9yYWw9IERCOjp0YWJsZSgnY2FyZ29fbGFib3JhbCcpLT53aGVyZSgnbm9tYnJlJywgJE5vbWJyZUNhcmdvX2xhYm9yYWwpLT5nZXQoKTsgDQogICAgICAgICAgICAgICAgICAgIGlmKGNvdW50KCRjYXJnb19sYWJvcmFsKT09MCl7ICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2FyZ29fbGFib3JhbD1udWxsOyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQjo6dGFibGUoJ2NhcmdvX2xhYm9yYWwnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+aW5zZXJ0KFsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdub21icmUnICAgICAgICAgICAgICAgID0+JE5vbWJyZUNhcmdvX2xhYm9yYWwsIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVzY3JpcGNpb24nICAgICAgICAgICA9PiJJTVBPUlRBRE8gREVTREUgRUwgUEFEUk9OIEdFTkVSQUwiLCAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmVjaGFfY3JlYWNpb24nICAgICAgICA9PiAkZGF0ZVJlZ2lzdHJvLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXN0YWRvJyAgICAgICAgICAgICAgICA9PiAnMScgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7ICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2FyZ29fbGFib3JhbD0gREI6OnRhYmxlKCdjYXJnb19sYWJvcmFsJyktPndoZXJlKCdmZWNoYV9jcmVhY2lvbicsICRkYXRlUmVnaXN0cm8pLT5nZXQoKTsgDQogICAgICAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICAvL2RhdG9zIGRlbCBjYXJnbyBsYWJvcmFsDQogICAgICAgICAgICAgICAkbml2ZWxfcmVtdW5lcmF0aXZvPSAkZGF0b3NbMjhdOyANCiAgICAgICAgICAgICAgIGlmKGVtcHR5KCRuaXZlbF9yZW11bmVyYXRpdm8pICkNCiAgICAgICAgICAgICAgIHsgDQogICAgICAgICAgICAgICAgJG5pdmVsX3JlbXVuZXJhdGl2bz0iSU1QT1JUQURPIFNJTiBEQVRPUyI7DQogICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAkY2FyZ29fbGFib3JhbD0gREI6OnRhYmxlKCduaXZlbF9yZW11bmVyYXRpdm8nKS0+d2hlcmUoJ25vbWJyZScsICRuaXZlbF9yZW11bmVyYXRpdm8pLT5nZXQoKTsgIA0KICAgICAgICAgICAgICAgICAgICBpZihjb3VudCgkY2FyZ29fbGFib3JhbCk9PTApeyAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNhcmdvX2xhYm9yYWw9bnVsbDsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgREI6OnRhYmxlKCduaXZlbF9yZW11bmVyYXRpdm8nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+aW5zZXJ0KFsgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdub21icmUnICAgICAgICAgICAgICAgID0+JG5pdmVsX3JlbXVuZXJhdGl2bywgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkZXNjcmlwY2lvbicgICAgICAgICAgID0+IklNUE9SVEFETyBERVNERSBFTCBQQURST04gR0VORVJBTCIsICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmZWNoYV9jcmVhY2lvbicgICAgICAgID0+ICRkYXRlUmVnaXN0cm8sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlc3RhZG8nICAgICAgICAgICAgICAgID0+ICcxJyANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2FyZ29fbGFib3JhbD0gREI6OnRhYmxlKCduaXZlbF9yZW11bmVyYXRpdm8nKS0+d2hlcmUoJ2ZlY2hhX2NyZWFjaW9uJywgJGRhdGVSZWdpc3RybyktPmdldCgpOyANCiAgICAgICAgICAgICAgICAgICAgfSAgDQogICAgICAgICAgICAgICAgICAgICRob3JhUmVnaXN0cm89bnVsbDsNCiAgICAgICAgICAgICAgICAgICAgJGhvcmFSZWdpc3Rybz1kYXRlKCdZLW0tZCBoOm06cycpOw0KICAgICAgICAgICAgICAgICAkcmVnaXN0cm9Vc3VhcmlvPSAgIERCOjp0YWJsZSgndXNlcnMnKQ0KICAgICAgICAgICAgICAgICAgICAtPmluc2VydChbDQogICAgICAgICAgICAgICAgICAgICAgICAnaWRlbXByZXNhJyAgICAgICAgID0+ICJFMDEiLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2lkZG9jdW1lbnRvJyAgICAgICA9PiAxICwNCiAgICAgICAgICAgICAgICAgICAgICAgICdjb2RpZ29fcGxpZWdvJyAgICAgPT4kZGF0b3NbMF0sDQogICAgICAgICAgICAgICAgICAgICAgICAndmFsaWRhZG9fcmVuaWVjJyAgID0+JGRhdG9zWzFdLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ25yb19kb2N1bWVudG8nICAgICA9PiAkZGF0b3NbMl0sIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ25vbWJyZScgICAgICAgICAgICA9PiAkZGF0b3NbM10sDQogICAgICAgICAgICAgICAgICAgICAgICAnYXBlbGxpZG9zJyAgICAgICAgID0+ICRkYXRvc1s0XS4iICIuJGRhdG9zWzVdLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2FwZWxsaWRvX3BhdGVybm8nICA9PiAkZGF0b3NbNF0sDQogICAgICAgICAgICAgICAgICAgICAgICAnYXBlbGxpZG9fbWF0ZXJubycgID0+ICRkYXRvc1s1XSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdhcGVsbGlkb3NfY2FzYWRhJyAgPT4gJGRhdG9zWzZdLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2ZlY2hhX25hY2ltaWVudG8nICA9PiAkZGF0b3NbN10sDQogICAgICAgICAgICAgICAgICAgICAgICAnZXN0YWRvX2NpdmlsJyAgICAgID0+ICRkYXRvc1s4XSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdkaXJlY2Npb24nICAgICAgICAgPT4gJGRhdG9zWzldLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3RlbGVmb25vJyAgICAgICAgICA9PiAkZGF0b3NbMTBdLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdyZWdpbWVuX2xhYm9yYWwnICAgPT4gJHJlZ2ltZW5bMF0tPmNvZGlnbywNCiAgICAgICAgICAgICAgICAgICAgICAgICdzaXR1YWNpb25fbGFib3JhbCcgPT4gJHNpdHVhY2lvbl9sYWJvcmFsWzBdLT5jb2RpZ28sIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2FyZWFfdHJhYmFqYWRvcicgICA9PiAkYXJlYV9sYWJvcmFsWzBdLT5jb2RpZ28sIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2NhcmdvJyAgICAgICAgICAgICA9PiAkY2FyZ29fbGFib3JhbFswXS0+Y29kaWdvLCAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ1NFWE8nICAgICAgICAgICAgID0+ICRyZXF1ZXN0LT5pZFNleG8sIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2lkdGlwbycgICAgICAgICAgICA9PiAiVFJBIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdlbWFpbCcgICAgICAgICAgICAgPT4gIi0tLS0tLSIsDQogICAgICAgICAgICAgICAgICAgICAgICAndXN1YXJpbycgICAgICAgICAgID0+ICRkYXRvc1syXSwgDQogICAgICAgICAgICAgICAgICAgICAgICAncGFzc3dvcmQnICAgICAgICAgID0+IEhhc2g6Om1ha2UoIjEyMzQ1NiIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2lkdXN1YXJpbycgICAgICAgICA9PiBpbnR2YWwoQXV0aDo6dXNlcigpLT5pZCksDQogICAgICAgICAgICAgICAgICAgICAgICAnYXZhdGFyJyAgICAgICAgICAgID0+IG51bGwsIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2VzdGFkbycgICAgICAgICAgICA9PiAxLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2NyZWF0ZWRfYXQnICAgICAgICA9PiAkaG9yYVJlZ2lzdHJvLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdnbG9zYScgICAgICAgICAgICAgPT4gIklNUE9SVEFETyBERSBFQ1hFTCIsDQogICAgICAgICAgICAgICAgICAgIF0pOw0KICAgICAgICAgICAgICAgICAgLy8gaWYoJHJlZ2lzdHJvVXN1YXJpbz09ZmFsc2UpO3sNCiAgICAgICAgICAgICAgICAgIC8vICBkZCgkZGF0b3MpOyANCg0KICAgICAgICAgICAgICAgICAgLy8gfQ0KICAgICAgICAgICAgICAgIC8vIGRkKCdsbGVnbycpOw0KICAgICAgICAgICAgICAgICR0cmFiYWphZG9yPW51bGw7DQogICAgICAgICAgICAgICAgJHRyYWJhamFkb3I9IERCOjp0YWJsZSgndXNlcnMnKS0+d2hlcmUoJ25yb19kb2N1bWVudG8nLCRkYXRvc1syXSktPmdldCgpOyANCiAgICAgICAgICAgICAgICAkbml2ZWxfZWR1Y2F0aXZvPW51bGw7DQogICAgICAgICAgICAgICAgJG5pdmVsX2VkdWNhdGl2bz0gJGRhdG9zWzExXTsgDQogICAgICAgICAgICAgICBpZihlbXB0eSgkbml2ZWxfZWR1Y2F0aXZvKSApDQogICAgICAgICAgICAgICB7ICANCiAgICAgICAgICAgICAgICAkbml2ZWxfZWR1Y2F0aXZvPSJJTVBPUlRBRE8gU0lOIERBVE9TIjsNCiAgICAgICAgICAgICAgIH1lbHNleyANCiAgICAgICAgICAgICAgICBEQjo6dGFibGUoJ25pdmVsX2VkdWNhdGl2bycpDQogICAgICAgICAgICAgICAgICAgIC0+aW5zZXJ0KFsNCiAgICAgICAgICAgICAgICAgICAgICAgICdpZF90cmFiYWphZG9yJyAgICAgICAgID0+aW50dmFsKCR0cmFiYWphZG9yWzBdLT5pZCksICANCiAgICAgICAgICAgICAgICAgICAgICAgICduaXZlbF9lZHVjYXRpdm8nICAgICAgID0+JGRhdG9zWzExXSwgDQogICAgICAgICAgICAgICAgICAgICAgICAnY2VudHJvX2VzdHVkaW9zJyAgICAgICA9PictLS0tLS0tLScsIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3NpdHVhY2lvbl9hY2FkZW1pY2EnICAgPT4kZGF0b3NbMTRdLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdhbm9faW5pY2lvJyAgICAgICAgICAgID0+Jy0tLScsIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2Fub19maW4nICAgICAgICAgICAgICAgPT4nLS0tJywgIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ25vbWJyZV9uaXZlbCcgICAgICAgICAgPT4kZGF0b3NbMTNdLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdkZXNjcmlwY2lvbicgICAgICAgICAgID0+J0NPRElHTyBERSBQUk9GRVNJw5NOOiAnLiRkYXRvc1sxNV0sDQogICAgICAgICAgICAgICAgICAgICAgICAnZmVjaGFfY3JlYWNpb24nICAgICAgICA9PiAkaG9yYVJlZ2lzdHJvLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2VzdGFkbycgICAgICAgICAgICAgICAgPT4gJzEnIA0KICAgICAgICAgICAgICAgICAgICBdKTsgIA0KICAgICAgICAgICAgICB9ICANCg0KICAgICAgICAgICAgICAkZXNwZWNpYWxpZGFkPW51bGw7DQogICAgICAgICAgICAgICAgJGVzcGVjaWFsaWRhZD0gJGRhdG9zWzE2XTsNCiAgICAgICAgICAgICAgIGlmKCRlc3BlY2lhbGlkYWQ9PSJOTyIpDQogICAgICAgICAgICAgICB7ICANCiAgICAgICAgICAgICAgICAkZXNwZWNpYWxpZGFkPSJJTVBPUlRBRE8gU0lOIERBVE9TIjsNCiAgICAgICAgICAgICAgIH1lbHNleyANCiAgICAgICAgICAgICAgICBEQjo6dGFibGUoJ25pdmVsX2VkdWNhdGl2bycpDQogICAgICAgICAgICAgICAgICAgIC0+aW5zZXJ0KFsNCiAgICAgICAgICAgICAgICAgICAgICAgICdpZF90cmFiYWphZG9yJyAgICAgICAgID0+aW50dmFsKCR0cmFiYWphZG9yWzBdLT5pZCksICANCiAgICAgICAgICAgICAgICAgICAgICAgICduaXZlbF9lZHVjYXRpdm8nICAgICAgID0+JGRhdG9zWzIwXSwgDQogICAgICAgICAgICAgICAgICAgICAgICAnY2VudHJvX2VzdHVkaW9zJyAgICAgICA9PictLS0tLS0tLScsIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3NpdHVhY2lvbl9hY2FkZW1pY2EnICAgPT4kZGF0b3NbMThdLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdhbm9faW5pY2lvJyAgICAgICAgICAgID0+Jy0tLScsIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2Fub19maW4nICAgICAgICAgICAgICAgPT4nLS0tJywgIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ25vbWJyZV9uaXZlbCcgICAgICAgICAgPT4kZGF0b3NbMTddLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdkZXNjcmlwY2lvbicgICAgICAgICAgID0+J1JOIDonLiRkYXRvc1sxOV0sDQogICAgICAgICAgICAgICAgICAgICAgICAnZmVjaGFfY3JlYWNpb24nICAgICAgICA9PiAkaG9yYVJlZ2lzdHJvLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2VzdGFkbycgICAgICAgICAgICAgICAgPT4gJzEnIA0KICAgICAgICAgICAgICAgICAgICBdKTsgIA0KICAgICAgICAgICAgICB9ICAgDQoNCiAgICAgICAgICAgICAgLy8gZGQoJ2NvbnRyYXRvJywkdHJhYmFqYWRvclswXSk7DQoNCiAgICAgICAgICAgICAgICRjb250cmF0b3M9bnVsbDsNCiAgICAgICAgICAgICAgICAkY29udHJhdG9zPSAkZGF0b3NbMTZdOyANCiAgICAgICAgICAgICAgIGlmKGVtcHR5KCRjb250cmF0b3MpICkNCiAgICAgICAgICAgICAgIHsgIA0KICAgICAgICAgICAgICAgICRjb250cmF0b3M9IklNUE9SVEFETyBTSU4gREFUT1MiOw0KICAgICAgICAgICAgICAgfWVsc2V7ICANCi8vIGRkKCRkYXRvc1szM10pOw0KICAgICAgICAgICAgICAgICBEQjo6dGFibGUoJ2NvbnRyYXRvcycpDQogICAgICAgICAgICAgICAgICAgIC0+aW5zZXJ0KFsNCiAgICAgICAgICAgICAgICAgICAgICAgICdpZF90cmFiYWphZG9yJyAgICAgICAgID0+aW50dmFsKCR0cmFiYWphZG9yWzBdLT5pZCksICAgDQogICAgICAgICAgICAgICAgICAgICAgICAnYXJlYV90cmFiYWphZG9yJyAgICAgICA9PiR0cmFiYWphZG9yWzBdLT5hcmVhX3RyYWJhamFkb3IgLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdzaXR1YWNpb25fbGFib3JhbCcgICAgID0+JHRyYWJhamFkb3JbMF0tPnNpdHVhY2lvbl9sYWJvcmFsICwgIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3JlZ2ltZW5fbGFib3JhbCcgICAgICAgPT4kdHJhYmFqYWRvclswXS0+cmVnaW1lbl9sYWJvcmFsLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdjYXJnb19sYWJvcmFsJyAgICAgICAgID0+JHRyYWJhamFkb3JbMF0tPmNhcmdvLCAgDQogICAgICAgICAgICAgICAgICAgICAgICAnZmVjaGFfcmVzb2x1Y2lvbicgICAgICA9PiItLy0vLSIsIA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2pvcm5hZGFfbGFib3JhbCcgICAgICAgPT4xLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3RpcG9fcmVzb2x1Y2lvbicgICAgICAgPT4iUkVTT0xVQ0nDk04gRElSRUNUT1JJQUwiLCANCiAgICAgICAgICAgICAgICAgICAgICAgICdmZWNoYV9pbmljaW8nICAgICAgICAgID0+JGRhdG9zWzMzXSwgDQogICAgICAgICAgICAgICAgICAgICAgICAvLyAnZmVjaGFfZmluJyAgICAgICAgICAgICA9PiRyZXF1ZXN0LT4gZmVjaGFSZXNvbHVjaW9uRmluLCANCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICd1cmxfZG9jJyAgICAgICAgICAgICAgID0+J3N0b3JhZ2UvJy4kdXJsX1BkZiwNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICduYW1lX2RvYycgICAgICAgICAgICAgID0+ICRub21icmUsIA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ2lkX2RvYycgICAgICAgICAgICAgICAgPT4kZG9jdW1lbnRvRFswXS0+Y29kaWdvLA0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gJ2ZvbGlvcycgICAgICAgICAgICAgICAgPT4kcmVxdWVzdC0+bnVtZXJvRm9saW9zUmVzb2x1Y2lvbkxhYm9yYWwsICANCiAgICAgICAgICAgICAgICAgICAgICAgICdkZXNjcmlwY2lvbicgICAgICAgICAgID0+IklNUE9SVEFETyBERSBQQURST04gR0VOUkFMIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICdmZWNoYV9jcmVhY2lvbicgICAgICAgID0+IGRhdGUoJ1ktbS1kIEg6bTpzJyksDQogICAgICAgICAgICAgICAgICAgICAgICAnZXN0YWRvJyAgICAgICAgICAgICAgICA9PiAnMScgIA0KICAgICAgICAgICAgICAgICAgICBdKTsgIA0KICAgICAgICAgICAgICB9ICANCg0KDQogICAgICAgICAgICB9IA0KDQogICAgfSANCiAgICBkZCgnbGxlZ28nKTsNCiANCg0KICAgfQ0KDQoNCg0KDQogICBwdWJsaWMgZnVuY3Rpb24gYWRkVXNlclBQUG9FKCkNCiAgIHsNCiAgICAgICAkdXN1YXJpb19jbGllbnRlID0gbnVsbDsNCiAgICAgICAkY29udHJhc2VuYV9jbGllbnRlID0gbnVsbDsNCiAgICAgICAkaXAgPSBudWxsOw0KICAgICAgIA0KICAgICAgICRyb3V0ZXIgPSBEQjo6dGFibGUoJ3JvdXRlcicpLT5nZXQoKTsNCg0KICAgICAgIGZvcmVhY2ggKCRyb3V0ZXIgYXMgJHJvdSkgew0KICAgICAgICAgICAkQVBJID0gbmV3IHJvdXRlcm9zX2FwaSgpOw0KICAgICAgICAgICAkQVBJLT5kZWJ1ZyA9IGZhbHNlOw0KICAgICAgICAgICAkQVJSQVkgPSBudWxsOw0KDQogICAgICAgICAgICRzZXJ2aWNpb3MgPSBEQjo6dGFibGUoJ3NlcnZpY2lvX2ludGVybmV0JyktPndoZXJlKCdpZHJvdXRlcicsJHJvdS0+aWRyb3V0ZXIpLT5nZXQoKTsNCg0KICAgICAgICAgICBpZiAoJEFQSS0+Y29ubmVjdCgkcm91LT5pcCAsICRyb3UtPnVzdWFyaW8gLCAkcm91LT5wYXNzd29yZCwgJHJvdS0+cHVlcnRvICkpIHsgDQogICAgICAgICAgICAgICAkQVJSQVkgPSAkQVBJLT5jb21tKCIvcHBwL2FjdGl2ZS9wcmludCIpOw0KDQogICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHNlcnZpY2lvcyBhcyAkc2Vydikgew0KICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkQVJSQVkgYXMgJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHZhbHVlWyduYW1lJ10gPT0gdHJpbSgkc2Vydi0+dXN1YXJpb19jbGllbnRlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpcCA9ICR2YWx1ZVsnYWRkcmVzcyddOyAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRBUlJBWTIgPSAkQVBJLT5jb21tKCIvcHBwL3NlY3JldC9wcmludCIpOyANCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRBUlJBWTIgYXMgJGRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRkYXRhWyduYW1lJ10gPT0gdHJpbSgkc2Vydi0+dXN1YXJpb19jbGllbnRlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlkID0gJGRhdGFbJy5pZCddOyAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJEFSUkFZMiA9ICRBUEktPmNvbW0oIi9wcHAvc2VjcmV0L3NldCIsIGFycmF5KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIuaWQiICAgICA9PiAkaWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlbW90ZS1hZGRyZXNzIiA9PiAkaXANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsgDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS1DcmVhY2nDs24gZGUgbG9zIHNlcnZpY2lvcyBkZSBpbnRlcm5ldC0tLS0tLS0tLS0tLS0tLS0tICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQjo6dGFibGUoJ3NlcnZpY2lvX2ludGVybmV0JykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPndoZXJlKCdpZGNsaWVudGUnLCRzZXJ2LT5pZGNsaWVudGUpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT51cGRhdGUoWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaXAnICAgICAgICA9PiAkaXANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsgIA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGQoJHNlcnYtPmlkY2xpZW50ZSwgJGlwLCAkc2Vydi0+dXN1YXJpb19jbGllbnRlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgDQogICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgIH0gICAgDQoNCiAgICAgICAgICAgDQogICAgICAgfQ0KICAgfQ0KDQogICBwdWJsaWMgZnVuY3Rpb24gYWRkSXBQb29sKCkNCiAgIHsNCiAgICAgICAvL2RkKCRyZXF1ZXN0KTsNCiAgICAgICAkaXBfaW5pY2lhbCA9IG51bGw7DQogICAgICAgJGlwX2ZpbmFsID0gbnVsbDsNCiAgICAgICAkcG9vbCA9IERCOjp0YWJsZSgnaXBfcG9vbCcpLT5nZXQoKTsNCg0KICAgICAgIGZvcmVhY2ggKCRwb29sIGFzICR2YWwpIHsNCiAgICAgICAgICAgJGlwX2luaWNpYWwgPSAkdmFsLT5pcF9pbmljaWFsOw0KICAgICAgICAgICAkaXBfZmluYWwgPSAkdmFsLT5pcF9maW5hbDsNCiAgICAgICB9DQoNCiAgICAgICAkaXBzT2N1cGFkb3MgPSBEQjo6dGFibGUoJ3NlcnZpY2lvX2ludGVybmV0JykNCiAgICAgICAgICAgLT5zZWxlY3QoJ2lwJykNCiAgICAgICAgICAgLT5nZXQoKTsNCg0KICAgICAgICRyYW5nb1tdID0gbnVsbDsNCiAgICAgICAkeCA9IDA7DQogICAgICAgJGJhbmRlcmEgPSBudWxsOw0KDQogICAgICAgJGluaSA9IHN0cnBvcygkaXBfaW5pY2lhbCwgJy4nLDQpKzE7DQogICAgICAgJGZpbiA9IHN0cnBvcygkaXBfaW5pY2lhbCwgJy4nLCRpbmkpOw0KICAgICAgICR2YXIgPSBzdWJzdHIoJGlwX2luaWNpYWwsICRpbmksJGZpbi0kaW5pKTsNCiAgICAgICAkeGluaSA9IHN1YnN0cigkaXBfaW5pY2lhbCwgJGZpbisxLHN0cmxlbigkaXBfaW5pY2lhbCkpOw0KDQogICAgICAgJGNhZGVuYSA9IHN1YnN0cigkaXBfaW5pY2lhbCwgMCwkaW5pKTsNCg0KICAgICAgICRpbmkgPSBzdHJwb3MoJGlwX2ZpbmFsLCAnLicsNCkrMTsNCiAgICAgICAkZmluID0gc3RycG9zKCRpcF9maW5hbCwgJy4nLCRpbmkpOw0KICAgICAgICR2YXIyID0gc3Vic3RyKCRpcF9maW5hbCwgJGluaSwkZmluLSRpbmkpOw0KICAgICAgICR4ZmluID0gc3Vic3RyKCRpcF9maW5hbCwgJGZpbisxLHN0cmxlbigkaXBfZmluYWwpKTsNCg0KICAgICAgIGZvciAoJGk9JHZhcjsgJGkgPD0gJHZhcjI7ICRpKyspIHsgDQogICAgICAgICAgICR2YWxvciA9IDE7DQogICAgICAgICAgICR2YWxvcjIgPSAyNTU7DQogICAgICAgICAgIGlmICgkaSA9PSAkdmFyKSB7DQogICAgICAgICAgICAgICAkdmFsb3IgPSAkeGluaTsNCiAgICAgICAgICAgfSAgICAgICAgICAgIA0KICAgICAgICAgICBpZiAoJGkgPT0gJHZhcjIpIHsNCiAgICAgICAgICAgICAgICR2YWxvcjIgPSAkeGZpbjsNCiAgICAgICAgICAgfQ0KICAgICAgICAgICANCiAgICAgICAgICAgZm9yICgkYT0kdmFsb3I7ICRhIDw9ICR2YWxvcjI7ICRhKyspIHsNCiAgICAgICAgICAgICAgICRJUCA9ICRjYWRlbmEuJGkuJy4nLiRhOw0KICAgICAgICAgICAgICAgZm9yZWFjaCAoJGlwc09jdXBhZG9zIGFzICR2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICRiYW5kZXJhID0gMDsNCiAgICAgICAgICAgICAgICAgICBpZiAoJElQID09ICR2YWx1ZS0+aXApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgJGJhbmRlcmEgPSAxOw0KICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgaWYgKCRiYW5kZXJhID09IDApIHsNCiAgICAgICAgICAgICAgICAgICBhcnJheV9wdXNoKCRyYW5nbywgWydpcCcgPT4gJGNhZGVuYS4kaS4nLicuJGFdKTsNCiAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgDQogICAgICAgICAgIH0gICAgICAgICAgICANCiAgICAgICB9DQoNCiAgICAgICB1bnNldCgkcmFuZ29bMF0pOw0KICAgICAgIC8vZGQoJHJhbmdvKTsNCg0KICAgICAgICR1c3VhcmlvX2NsaWVudGUgPSBudWxsOw0KICAgICAgICRjb250cmFzZW5hX2NsaWVudGUgPSBudWxsOw0KICAgICAgICRpcCA9IG51bGw7DQogICAgICAgDQogICAgICAgJHJvdXRlciA9IERCOjp0YWJsZSgncm91dGVyJyktPmdldCgpOw0KDQogICAgICAgZm9yZWFjaCAoJHJvdXRlciBhcyAkcm91KSB7DQogICAgICAgICAgIA0KDQogICAgICAgICAgICAgICBmb3JlYWNoICgkcmFuZ28gYXMgJHBvb2wpIHsNCiAgICAgICAgICAgICAgICAgICAvL2RkKCRwb29sKTsNCiAgICAgICAgICAgICAgICAgICAvLyRzZXJ2aWNpb3MgPSBEQjo6dGFibGUoJ3NlcnZpY2lvX2ludGVybmV0JyktPndoZXJlKCdpZHJvdXRlcicsJHJvdS0+aWRyb3V0ZXIpLT5nZXQoKTsNCiAgICAgICAgICAgICAgICAgICAvL2ZvcmVhY2ggKCRzZXJ2aWNpb3MgYXMgJHNlcnYpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoZW1wdHkoJHNlcnYtPmlwKSkgew0KICAgICAgICAgICAgICAgICAgICRBUEkgPSBuZXcgcm91dGVyb3NfYXBpKCk7DQogICAgICAgICAgICAgICAgICAgJEFQSS0+ZGVidWcgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAkQVJSQVkgPSBudWxsOw0KDQogICAgICAgICAgICAgICAgICAgLy8kc2VydmljaW9zID0gREI6OnRhYmxlKCdzZXJ2aWNpb19pbnRlcm5ldCcpLT53aGVyZSgnaWRyb3V0ZXInLCRyb3UtPmlkcm91dGVyKS0+Z2V0KCk7DQoNCiAgICAgICAgICAgICAgICAgICBpZiAoJEFQSS0+Y29ubmVjdCgkcm91LT5pcCAsICRyb3UtPnVzdWFyaW8gLCAkcm91LT5wYXNzd29yZCwgJHJvdS0+cHVlcnRvICkpIHsgDQogICAgICAgICAgICAgICAgICAgICAgICRBUlJBWSA9ICRBUEktPmNvbW0oIi9wcHAvc2VjcmV0L3ByaW50Iik7IA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkQVJSQVkgYXMgJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiAoJHZhbHVlWyduYW1lJ10gPT0gdHJpbSgkc2Vydi0+dXN1YXJpb19jbGllbnRlKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJEFSUkFZMiA9ICRBUEktPmNvbW0oIi9wcHAvc2VjcmV0L3NldCIsIGFycmF5KA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLmlkIiAgICAgPT4gJHZhbHVlWycuaWQnXSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlbW90ZS1hZGRyZXNzIiA9PiAkcG9vbFsnaXAnXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTsgDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8tLS0tLS0tLS0tQ3JlYWNpw7NuIGRlIGxvcyBzZXJ2aWNpb3MgZGUgaW50ZXJuZXQtLS0tLS0tLS0tLS0tLS0tLSAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCOjp0YWJsZSgnc2VydmljaW9faW50ZXJuZXQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPndoZXJlKCd1c3VhcmlvX2NsaWVudGUnLHRyaW0oJHZhbHVlWyduYW1lJ10pKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtPnVwZGF0ZShbDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaXAnICAgICAgICA9PiAkcG9vbFsnaXAnXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTsgIA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZGQoJHNlcnYtPmlkY2xpZW50ZSwgJGlwLCAkc2Vydi0+dXN1YXJpb19jbGllbnRlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9icmVhayAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vfSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYnJlYWs7IA0KDQogICAgICAgICAgICAgICAgICAgICAgIC8vfSAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgIH0gICAgICAgICANCiAgICAgICAgICAgICAgIC8vfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICB9DQogICAgICAgICAgIA0KICAgICAgIH0NCiAgIH0NCg0KICAgcHVibGljIGZ1bmN0aW9uIGFkZElwUG9vbDIoKQ0KICAgew0KICAgICAgIC8vZGQoJHJlcXVlc3QpOw0KICAgICAgICRpcF9pbmljaWFsID0gbnVsbDsNCiAgICAgICAkaXBfZmluYWwgPSBudWxsOw0KICAgICAgICRwb29sID0gREI6OnRhYmxlKCdpcF9wb29sJyktPmdldCgpOw0KDQogICAgICAgZm9yZWFjaCAoJHBvb2wgYXMgJHZhbCkgew0KICAgICAgICAgICAkaXBfaW5pY2lhbCA9ICR2YWwtPmlwX2luaWNpYWw7DQogICAgICAgICAgICRpcF9maW5hbCA9ICR2YWwtPmlwX2ZpbmFsOw0KICAgICAgIH0NCg0KICAgICAgICRpcHNPY3VwYWRvcyA9IERCOjp0YWJsZSgnc2VydmljaW9faW50ZXJuZXQnKQ0KICAgICAgICAgICAtPnNlbGVjdCgnaXAnKQ0KICAgICAgICAgICAtPmdldCgpOw0KDQogICAgICAgJHJhbmdvW10gPSBudWxsOw0KICAgICAgICR4ID0gMDsNCiAgICAgICAkYmFuZGVyYSA9IG51bGw7DQoNCiAgICAgICAkaW5pID0gc3RycG9zKCRpcF9pbmljaWFsLCAnLicsNCkrMTsNCiAgICAgICAkZmluID0gc3RycG9zKCRpcF9pbmljaWFsLCAnLicsJGluaSk7DQogICAgICAgJHZhciA9IHN1YnN0cigkaXBfaW5pY2lhbCwgJGluaSwkZmluLSRpbmkpOw0KICAgICAgICR4aW5pID0gc3Vic3RyKCRpcF9pbmljaWFsLCAkZmluKzEsc3RybGVuKCRpcF9pbmljaWFsKSk7DQoNCiAgICAgICAkY2FkZW5hID0gc3Vic3RyKCRpcF9pbmljaWFsLCAwLCRpbmkpOw0KDQogICAgICAgJGluaSA9IHN0cnBvcygkaXBfZmluYWwsICcuJyw0KSsxOw0KICAgICAgICRmaW4gPSBzdHJwb3MoJGlwX2ZpbmFsLCAnLicsJGluaSk7DQogICAgICAgJHZhcjIgPSBzdWJzdHIoJGlwX2ZpbmFsLCAkaW5pLCRmaW4tJGluaSk7DQogICAgICAgJHhmaW4gPSBzdWJzdHIoJGlwX2ZpbmFsLCAkZmluKzEsc3RybGVuKCRpcF9maW5hbCkpOw0KDQogICAgICAgZm9yICgkaT0kdmFyOyAkaSA8PSAkdmFyMjsgJGkrKykgeyANCiAgICAgICAgICAgJHZhbG9yID0gMTsNCiAgICAgICAgICAgJHZhbG9yMiA9IDI1NTsNCiAgICAgICAgICAgaWYgKCRpID09ICR2YXIpIHsNCiAgICAgICAgICAgICAgICR2YWxvciA9ICR4aW5pOw0KICAgICAgICAgICB9ICAgICAgICAgICAgDQogICAgICAgICAgIGlmICgkaSA9PSAkdmFyMikgew0KICAgICAgICAgICAgICAgJHZhbG9yMiA9ICR4ZmluOw0KICAgICAgICAgICB9DQogICAgICAgICAgIA0KICAgICAgICAgICBmb3IgKCRhPSR2YWxvcjsgJGEgPD0gJHZhbG9yMjsgJGErKykgew0KICAgICAgICAgICAgICAgJElQID0gJGNhZGVuYS4kaS4nLicuJGE7DQogICAgICAgICAgICAgICBmb3JlYWNoICgkaXBzT2N1cGFkb3MgYXMgJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgJGJhbmRlcmEgPSAwOw0KICAgICAgICAgICAgICAgICAgIGlmICgkSVAgPT0gJHZhbHVlLT5pcCkgew0KICAgICAgICAgICAgICAgICAgICAgICAkYmFuZGVyYSA9IDE7DQogICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0gDQogICAgICAgICAgICAgICBpZiAoJGJhbmRlcmEgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgIGFycmF5X3B1c2goJHJhbmdvLCBbJ2lwJyA9PiAkY2FkZW5hLiRpLicuJy4kYV0pOw0KDQogICAgICAgICAgICAgICAgICAgJHJvdXRlciA9IERCOjp0YWJsZSgncm91dGVyJyktPmdldCgpOw0KDQogICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHJvdXRlciBhcyAkcm91KSB7ICAgDQogICAgICAgICAgICAgICAgICAgICAgICRBUEkgPSBuZXcgcm91dGVyb3NfYXBpKCk7DQogICAgICAgICAgICAgICAgICAgICAgICRBUEktPmRlYnVnID0gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgICAgICRBUlJBWSA9IG51bGw7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRBUEktPmNvbm5lY3QoJHJvdS0+aXAgLCAkcm91LT51c3VhcmlvICwgJHJvdS0+cGFzc3dvcmQsICRyb3UtPnB1ZXJ0byApKSB7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgJEFSUkFZID0gJEFQSS0+Y29tbSgiL3BwcC9zZWNyZXQvcHJpbnQiKTsgDQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkQVJSQVkgYXMgJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdmFsdWVbJ25hbWUnXSA9PSB0cmltKCRzZXJ2LT51c3VhcmlvX2NsaWVudGUpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRBUlJBWTIgPSAkQVBJLT5jb21tKCIvcHBwL3NlY3JldC9zZXQiLCBhcnJheSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIuaWQiICAgICA9PiAkdmFsdWVbJy5pZCddLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInJlbW90ZS1hZGRyZXNzIiA9PiAkcG9vbFsnaXAnXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7IA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy0tLS0tLS0tLS1DcmVhY2nDs24gZGUgbG9zIHNlcnZpY2lvcyBkZSBpbnRlcm5ldC0tLS0tLS0tLS0tLS0tLS0tICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCOjp0YWJsZSgnc2VydmljaW9faW50ZXJuZXQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT53aGVyZSgndXN1YXJpb19jbGllbnRlJyx0cmltKCR2YWx1ZVsnbmFtZSddKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0+dXBkYXRlKFsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnaXAnICAgICAgICA9PiAkcG9vbFsnaXAnXQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7ICANCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9kZCgkc2Vydi0+aWRjbGllbnRlLCAkaXAsICRzZXJ2LT51c3VhcmlvX2NsaWVudGUpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9icmVhayAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JyZWFrOyANCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgLy99ICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgDQogICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICANCiAgICAgICAgICAgfSAgICAgICAgICAgIA0KICAgICAgIH0NCg0KICAgICAgIHVuc2V0KCRyYW5nb1swXSk7DQogICAgICAgLy9kZCgkcmFuZ28pOw0KDQogICAgICAgJHVzdWFyaW9fY2xpZW50ZSA9IG51bGw7DQogICAgICAgJGNvbnRyYXNlbmFfY2xpZW50ZSA9IG51bGw7DQogICAgICAgJGlwID0gbnVsbDsNCiAgICAgICANCiAgICAgICAkcm91dGVyID0gREI6OnRhYmxlKCdyb3V0ZXInKS0+Z2V0KCk7DQoNCiAgICAgICBmb3JlYWNoICgkcm91dGVyIGFzICRyb3UpIHsNCiAgICAgICAgICAgDQoNCiAgICAgICAgICAgICAgIGZvcmVhY2ggKCRyYW5nbyBhcyAkcG9vbCkgew0KICAgICAgICAgICAgICAgICAgIC8vZGQoJHBvb2wpOw0KICAgICAgICAgICAgICAgICAgIC8vJHNlcnZpY2lvcyA9IERCOjp0YWJsZSgnc2VydmljaW9faW50ZXJuZXQnKS0+d2hlcmUoJ2lkcm91dGVyJywkcm91LT5pZHJvdXRlciktPmdldCgpOw0KICAgICAgICAgICAgICAgICAgIC8vZm9yZWFjaCAoJHNlcnZpY2lvcyBhcyAkc2Vydikgew0KICAgICAgICAgICAgICAgICAgICAgICAvL2lmIChlbXB0eSgkc2Vydi0+aXApKSB7DQogICAgICAgICAgICAgICAgICAgJEFQSSA9IG5ldyByb3V0ZXJvc19hcGkoKTsNCiAgICAgICAgICAgICAgICAgICAkQVBJLT5kZWJ1ZyA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICRBUlJBWSA9IG51bGw7DQoNCiAgICAgICAgICAgICAgICAgICAvLyRzZXJ2aWNpb3MgPSBEQjo6dGFibGUoJ3NlcnZpY2lvX2ludGVybmV0JyktPndoZXJlKCdpZHJvdXRlcicsJHJvdS0+aWRyb3V0ZXIpLT5nZXQoKTsNCg0KICAgICAgICAgICAgICAgICAgIGlmICgkQVBJLT5jb25uZWN0KCRyb3UtPmlwICwgJHJvdS0+dXN1YXJpbyAsICRyb3UtPnBhc3N3b3JkLCAkcm91LT5wdWVydG8gKSkgeyANCiAgICAgICAgICAgICAgICAgICAgICAgJEFSUkFZID0gJEFQSS0+Y29tbSgiL3BwcC9zZWNyZXQvcHJpbnQiKTsgDQogICAgICAgICAgICAgICAgICAgICAgICRjb250ID0gY291bnQoJEFSUkFZKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJEFSUkFZIGFzICR2YWx1ZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKCR2YWx1ZVsnbmFtZSddID09IHRyaW0oJHNlcnYtPnVzdWFyaW9fY2xpZW50ZSkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRBUlJBWTIgPSAkQVBJLT5jb21tKCIvcHBwL3NlY3JldC9zZXQiLCBhcnJheSgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi5pZCIgICAgID0+ICR2YWx1ZVsnLmlkJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJyZW1vdGUtYWRkcmVzcyIgPT4gJHBvb2xbJ2lwJ10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7IA0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLS0tLS0tLS0tLUNyZWFjacOzbiBkZSBsb3Mgc2VydmljaW9zIGRlIGludGVybmV0LS0tLS0tLS0tLS0tLS0tLS0gICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQjo6dGFibGUoJ3NlcnZpY2lvX2ludGVybmV0JykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT53aGVyZSgndXN1YXJpb19jbGllbnRlJyx0cmltKCR2YWx1ZVsnbmFtZSddKSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLT51cGRhdGUoWw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lwJyAgICAgICAgPT4gJHBvb2xbJ2lwJ10NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7ICANCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2RkKCRzZXJ2LT5pZGNsaWVudGUsICRpcCwgJHNlcnYtPnVzdWFyaW9fY2xpZW50ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYnJlYWsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAvL30gDQogICAgICAgICAgICAgICAgICAgICAgICAgICAvL2JyZWFrOyANCg0KICAgICAgICAgICAgICAgICAgICAgICAvL30gICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgDQogICAgICAgICAgICAgICAvL30NCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgfQ0KICAgICAgICAgICANCiAgICAgICB9DQogICB9DQoNCiAgIHB1YmxpYyBmdW5jdGlvbiBtYXBhUHJ1ZWJhKCl7DQogICAgcmV0dXJuIHZpZXcoJ2Zvcm1zLnBydWViYXMubWFwYUF1dG9jb21wbGV0ZScpOw0KICAgLy9yZXR1cm4gdmlldygnZm9ybXMuY2xpZW50ZXMubWFwYS5tb2RhbFVwZGF0ZScpOw0KfQ0KDQpwdWJsaWMgZnVuY3Rpb24gbWFwYUNsaWVudGVzKCl7DQogICAgLy9kZCgibGxlZ28iKTsNCg0KICAgIA0KICAgICAgICAkem9uYXMgID0gREI6OnRhYmxlKCd6b25hcycpLT53aGVyZSgnZXN0YWRvJywnMScpLT5nZXQoKTsgDQoNCiAgICAgICAgJHVzdWFyaW9zID0gREI6OnRhYmxlKCdzZXJ2aWNpb19pbnRlcm5ldCcpDQogICAgICAgIC0+c2VsZWN0KCdjbGllbnRlcy5ub21icmVzJywnc2VydmljaW9faW50ZXJuZXQuZW1pc29yX2NvbmVjdGFkbycsJ2VxdWlwb3MubW9kZWxvJywnbW9kb19lcXVpcG8uZGVzY3JpcGNpb24nLCdzZXJ2aWNpb19pbnRlcm5ldC5sYXRpdHVkJywnc2VydmljaW9faW50ZXJuZXQubG9uZ2l0dWQnLCd6b25hcy5ub21icmUnLCBEQjo6cmF3KCdlcXVpcG9zLmxhdGl0dWQgYXMgbGF0aXR1ZEUnKSwgREI6OnJhdygnZXF1aXBvcy5sb25naXR1ZCBhcyBsb25naXR1ZEUnKSwnZXF1aXBvcy5pZGVxdWlwbycpDQogICAgICAgIC0+am9pbignY2xpZW50ZXMnLCAnc2VydmljaW9faW50ZXJuZXQuaWRjbGllbnRlJywnPScsJ2NsaWVudGVzLmlkY2xpZW50ZScpIA0KICAgICAgICAtPmpvaW4oJ2VxdWlwb3MnLCAnZXF1aXBvcy5pZGVxdWlwbycsICc9JywgJ3NlcnZpY2lvX2ludGVybmV0LmVtaXNvcl9jb25lY3RhZG8nKSANCiAgICAgICAgLT5qb2luKCdtb2RvX2VxdWlwbycsICdtb2RvX2VxdWlwby5pZG1vZG8nLCAnPScsICdlcXVpcG9zLmlkbW9kbycpDQogICAgICAgIC0+am9pbignem9uYXMnLCAnem9uYXMuaWQnLCAnPScsICdzZXJ2aWNpb19pbnRlcm5ldC5pZFpvbmEnKQ0KICAgICAgICAtPndoZXJlKCdtb2RvX2VxdWlwby5kZXNjcmlwY2lvbicsICAnRU1JU09SJykNCiAgICAgICAgLy8tPmdyb3VwQnkoJ2VxdWlwb3MubW9kZWxvJykNCiAgICAgICAgLT5nZXQoKTsgIA0KDQoNCiAgICAgICAkZXF1aXBvcyA9IERCOjp0YWJsZSgnc2VydmljaW9faW50ZXJuZXQnKQ0KICAgICAgIC0+c2VsZWN0KCdlcXVpcG9zLm1vZGVsbycsJ21vZG9fZXF1aXBvLmRlc2NyaXBjaW9uJywgJ2VxdWlwb3MuaWRlcXVpcG8nLCd6b25hcy5ub21icmUnLCdlcXVpcG9zLmlkWm9uYScsREI6OnJhdygnZXF1aXBvcy5kZXNjcmlwY2lvbiBhcyBtb2RlbG9FJyksREI6OnJhdygnZXF1aXBvcy5sYXRpdHVkIGFzIGxhdGl0dWRFJyksIERCOjpyYXcoJ2VxdWlwb3MubG9uZ2l0dWQgYXMgbG9uZ2l0dWRFJykpIA0KICAgICAgIC0+am9pbignY2xpZW50ZXMnLCAnc2VydmljaW9faW50ZXJuZXQuaWRjbGllbnRlJywnPScsJ2NsaWVudGVzLmlkY2xpZW50ZScpIA0KICAgICAgIC0+am9pbignZXF1aXBvcycsICdlcXVpcG9zLmlkZXF1aXBvJywgJz0nLCAnc2VydmljaW9faW50ZXJuZXQuZW1pc29yX2NvbmVjdGFkbycpDQogICAgICAgLT5qb2luKCdtb2RvX2VxdWlwbycsICdtb2RvX2VxdWlwby5pZG1vZG8nLCAnPScsICdlcXVpcG9zLmlkbW9kbycpDQogICAgICAgLT5qb2luKCd6b25hcycsICd6b25hcy5pZCcsICc9JywgJ3NlcnZpY2lvX2ludGVybmV0LmlkWm9uYScpDQogICAgICAgLT53aGVyZSgnbW9kb19lcXVpcG8uZGVzY3JpcGNpb24nLCAgJ0VNSVNPUicpDQogICAgICAgLy8tPmdyb3VwQnkoJ2VxdWlwb3MubW9kZWxvJykNCiAgICAgICAtPmdldCgpOw0KICAgICAgIC8vZGQoJHVzdWFyaW9zICwkZXF1aXBvcyk7DQogICAgICAgLy9kZCgkem9uYXMsJHVzdWFyaW9zLCRlcXVpcG9zKTsNCg0KICAgICAgICByZXR1cm4gdmlldygnZm9ybXMuY2xpZW50ZXMubWFwYS5sc3RDbGllbnRlc01hcGEnLCBbDQogICAgICAgICAgICAnem9uYXMnPT4kem9uYXMsDQogICAgICAgICAgICAnZXF1aXBvcycgPT4gJGVxdWlwb3MgLA0KICAgICAgICAgICAgJ3VzdWFyaW9zJz0+JHVzdWFyaW9zDQogICAgDQogICAgICAgIF0pOw0KICAgIA0KDQp9DQoNCnB1YmxpYyBmdW5jdGlvbiByZWNpYmlyKFJlcXVlc3QgJHJlcXVlc3QpDQp7ICANCiAgICAgICAgc2Vzc2lvbihbJ2xhdGl0dWQnID0+ICRyZXF1ZXN0LT5sYXRpdHVkZV0pOw0KICAgICAgICBzZXNzaW9uKFsnbG9uZ2l0dWQnID0+ICRyZXF1ZXN0LT5sb25naXR1ZF0pOw0KICAgICAgICBzZXNzaW9uKFsnZGlyZWNjaW9uJyA9PiAkcmVxdWVzdC0+ZGlyZWNjaW9uZl0pOyAgDQp9DQpwdWJsaWMgZnVuY3Rpb24gcGFzYXIoUmVxdWVzdCAkcmVxdWVzdCkNCnsgDQogICAgICAgICRkYXRvcyA9IGFycmF5KCk7IA0KICAgICAgICAkbGF0aXR1ZCA9IHNlc3Npb24oJ2xhdGl0dWQnKTsNCiAgICAgICAgJGxvbmdpdHVkID0gc2Vzc2lvbignbG9uZ2l0dWQnKTsNCiAgICAgICAgJGRpcmVjY2lvbiA9IHNlc3Npb24oJ2RpcmVjY2lvbicpOyANCiAgICAgICAgJGRhdG9zWydsYXRpdHVkJ10gPSAkbGF0aXR1ZDsNCiAgICAgICAgJGRhdG9zWydsb25naXR1ZCddID0gJGxvbmdpdHVkOw0KICAgICAgICAkZGF0b3NbJ2RpcmVjY2lvbiddID0gICRkaXJlY2Npb247DQogICAgICAgIC8qaWYoICRsYXRpdHVkICE9bnVsbCBvciAgJGxhdGl0dWQ9PSd0cnVlJyAgKQ0KICAgICAgICB7DQogICAgICAgICAgICAkcmVxdWVzdC0+c2Vzc2lvbigpLT5mbGFzaCgnbGF0aXR1ZCcgKTsNCiAgICAgICAgICAgICRyZXF1ZXN0LT5zZXNzaW9uKCktPmZsYXNoKCdsb25naXR1ZCcgKTsNCiAgICAgICAgICAgICRyZXF1ZXN0LT5zZXNzaW9uKCktPmZsYXNoKCdkaXJlY2Npb24nICk7DQogICAgICAgIH0gKi8NCiAgICAgICAgLy9TZXNzaW9uOjpmbHVzaCgpOw0KICAgICAgIC8vIGRkKCRkYXRvcyk7DQogICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oJGRhdG9zKTsNCn0NCnB1YmxpYyBmdW5jdGlvbiBwYXNhckNyZWF0ZShSZXF1ZXN0ICRyZXF1ZXN0KQ0KeyANCiAgICAgICAgJGRhdG9zID0gYXJyYXkoKTsgDQogICAgICAgICRsYXRpdHVkID0gc2Vzc2lvbignbGF0aXR1ZCcpOw0KICAgICAgICAkbG9uZ2l0dWQgPSBzZXNzaW9uKCdsb25naXR1ZCcpOw0KICAgICAgICAkZGlyZWNjaW9uID0gc2Vzc2lvbignZGlyZWNjaW9uJyk7IA0KICAgICAgICAkZGF0b3NbJ2xhdGl0dWQnXSA9ICRsYXRpdHVkOw0KICAgICAgICAkZGF0b3NbJ2xvbmdpdHVkJ10gPSAkbG9uZ2l0dWQ7DQogICAgICAgICRkYXRvc1snZGlyZWNjaW9uJ10gPSAgJGRpcmVjY2lvbjsNCiAgICAgICAgLyppZiggJGxhdGl0dWQgIT1udWxsIG9yICAkbGF0aXR1ZD09J3RydWUnICApDQogICAgICAgIHsNCiAgICAgICAgICAgICRyZXF1ZXN0LT5zZXNzaW9uKCktPmZsYXNoKCdsYXRpdHVkJyApOw0KICAgICAgICAgICAgJHJlcXVlc3QtPnNlc3Npb24oKS0+Zmxhc2goJ2xvbmdpdHVkJyApOw0KICAgICAgICAgICAgJHJlcXVlc3QtPnNlc3Npb24oKS0+Zmxhc2goJ2RpcmVjY2lvbicgKTsNCiAgICAgICAgfSAgKi8NCg0KICAgICAgIC8vICRyZXF1ZXN0LT5zZXNzaW9uKCktPmZsYXNoKCdsYXRpdHVkJyApOw0KICAgICAgLy8gICRyZXF1ZXN0LT5zZXNzaW9uKCktPmZsYXNoKCdsb25naXR1ZCcgKTsNCiAgICAgICAvLyAkcmVxdWVzdC0+c2Vzc2lvbigpLT5mbGFzaCgnZGlyZWNjaW9uJyApOw0KICAgICAgICAvL1Nlc3Npb246OmZsdXNoKCk7DQogICAgICAgLy8gZGQoJGRhdG9zKTsNCiAgICByZXR1cm4gcmVzcG9uc2UoKS0+anNvbigkZGF0b3MpOw0KfQ0KcHVibGljIGZ1bmN0aW9uIGlmcmFtZSgpew0KICAgIC8vJGlkZW50aWZpY2Fkb3JfY2Fycml0byA9IHNlc3Npb24oJ2xhdGl0dWQnKTsNCiAgICAvLyRjb29raWVfbGVpZGEgPSAkcmVxdWVzdC0+Y29va2llKCdub21icmUnKTsNCiAgICAvL2RkKCRjb29raWVfbGVpZGEpOw0KICAgIC8qJGlkID0gc2Vzc2lvbignbGF0aXR1ZCcpOw0KICAgIGRkKCRpZCk7Ki8NCiAgICAkZGF0b3MgPSBhcnJheSgpOw0KICAgICRsYXRpdHVkID0gc2Vzc2lvbignbGF0aXR1ZCcpOw0KICAgICAgICAkbG9uZ2l0dWQgPSBzZXNzaW9uKCdsb25naXR1ZCcpOw0KICAgICAgICAkZGlyZWNjaW9uID0gc2Vzc2lvbignZGlyZWNjaW9uJyk7DQogICAgICAgICANCiAgICAgICAgJGRhdG9zWydsYXRpdHVkJ10gPSAkbGF0aXR1ZDsNCiAgICAgICAgJGRhdG9zWydsb25naXR1ZCddID0gJGxvbmdpdHVkOw0KICAgICAgICAkZGF0b3NbJ2RpcmVjY2lvbiddID0gICRkaXJlY2Npb247DQogICAgICAgLy8gU2Vzc2lvbjo6Zmx1c2goKTsNCiAgICAgICAvL2lmKGlzX251bGwoJGxhdGl0dWQpKSANCiAgICAgICANCiAgICAgICAgZGQoJGRhdG9zKTsNCiAgICANCiAgICByZXR1cm4gdmlldygnZm9ybXMucHJ1ZWJhcy5pZnJhbWUnKTsNCn0NCg0KfQ0K